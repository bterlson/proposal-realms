!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):r.RealmShim=e()}(this,function(){"use strict";function r(r){try{k(r,"__defineGetter__",{value:function(r,e){return k(this,r,{get:e,enumerable:!0,configurable:!0})}}),k(r,"__defineSetter__",{value:function(r,e){return k(this,r,{set:e,enumerable:!0,configurable:!0})}}),k(r,"__lookupGetter__",{value:function(r){for(var e=this,t=void 0;e&&!(t=N(e,r));)e=_(e);return t&&t.get}}),k(r,"__lookupSetter__",{value:function(r){for(var e=this,t=void 0;e&&!(t=N(e,r));)e=_(e);return t&&t.set}})}catch(r){}}function e(e){r(e.confinedWindow.Object.prototype)}function t(){D=!0}function o(){D=!1}function n(r){return r=r.replace(/\`/g,"\\`"),"\n        function "+C+'() {\n            with(arguments[0]) {\n                return (function(){\n                    "use strict";\n                    return eval(`'+r+"`);\n                }).call(this);\n            }\n        }\n    "}function a(r,e){var t=e.iframeDocument,o=e.confinedWindow,n=t.body,a=t.createElement("script");a.type="text/javascript",o[C]=void 0,a.appendChild(t.createTextNode(r)),n.appendChild(a),n.removeChild(a);var i=o[C];return o[C]=void 0,i}function i(r,e){if(r){r=n(r+""),t();var i=a(r,e),y=i.apply(e.thisValue,[e.globalProxy]);return o(),y}}function y(r){var e={eval:function(e){return i(e,r)}};return W(e.eval,r.Function),e.eval.toString=function(){return"function eval() { [shim code] }"},e.eval}function p(r){var e=r.confinedWindow,t=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var n=t.pop();return i("(function anonymous("+t.join(", ")+"){\n"+n+"\n}).bind(this)",r)};return t.prototype=e.Function.prototype,W(t,t.prototype),t.prototype.constructor=t,t.toString=function(){return"function Function() { [shim code] }"},t}function u(r){r.Function=p(r),r.eval=y(r)}function l(){var r=document.createElement("iframe");return r.style.display="none",r.title="script",r.setAttribute("aria-hidden",!0),document.body.appendChild(r),r}function c(){var r=l(),t=r.contentDocument,o=r.contentWindow,n={iframe:r,iframeDocument:t,confinedWindow:o,thisValue:void 0,globalObject:void 0,globalProxy:void 0};return e(n),U(n,u(n)),n.globalProxy=new Proxy(n,M),n}function f(r,e,t){r.thisValue=t,r.globalObject=e}function v(r){var e=r.confinedWindow,t=B(e.Symbol)&&e.Symbol.iterator||"@@iterator",o=(new e.Array)[t](),n=_(o),a=_(n),i=e.eval("(async function(){})"),y=i.constructor,p=y.prototype,u=e.eval("(function*(){})"),l=u.constructor,c=l.prototype,f=c.prototype,v=e.eval("(async function*(){})"),s=v.constructor,d=s.prototype,b=d.prototype,m=_(b),A=(new e.Map)[t](),E=_(A),P=(new e.Set)[t](),S=_(P),w=(new e.String)[t](),h=_(w),g=e.eval('(function () { "use strict"; return Object.getOwnPropertyDescriptor(arguments, "callee").get; })()'),I=_(Int8Array),R=I.prototype;return{Array:e.Array,ArrayBuffer:e.ArrayBuffer,ArrayBufferPrototype:e.ArrayBuffer.prototype,ArrayIteratorPrototype:n,ArrayPrototype:e.Array.prototype,ArrayProto_entries:e.Array.prototype.entries,ArrayProto_foreach:e.Array.prototype.forEach,ArrayProto_keys:e.Array.prototype.forEach,ArrayProto_values:e.Array.prototype.values,AsyncFromSyncIteratorPrototype:void 0,AsyncFunction:y,AsyncFunctionPrototype:p,AsyncGenerator:d,AsyncGeneratorFunction:s,AsyncGeneratorPrototype:b,AsyncIteratorPrototype:m,Atomics:e.Atomics,Boolean:e.Boolean,BooleanPrototype:e.Boolean.prototype,DataView:e.DataView,DataViewPrototype:e.DataView.prototype,Date:e.Date,DatePrototype:e.Date.prototype,decodeURI:e.decodeURI,decodeURIComponent:e.decodeURIComponent,encodeURI:e.encodeURI,encodeURIComponent:e.encodeURIComponent,Error:e.Error,ErrorPrototype:e.Error.prototype,eval:r.eval,EvalError:e.EvalError,EvalErrorPrototype:e.EvalError.prototype,Float32Array:e.Float32Array,Float32ArrayPrototype:e.Float32Array.prototype,Float64Array:e.Float64Array,Float64ArrayPrototype:e.Float64Array.prototype,Function:r.Function,FunctionPrototype:r.Function.prototype,Generator:c,GeneratorFunction:l,GeneratorPrototype:f,Int8Array:e.Int8Array,Int8ArrayPrototype:e.Int8Array.prototype,Int16Array:e.Int16Array,Int16ArrayPrototype:e.Int16Array.prototype,Int32Array:e.Int32Array,Int32ArrayPrototype:e.Int32Array.prototype,isFinite:e.isFinite,isNaN:e.isNaN,IteratorPrototype:a,JSON:e.JSON,JSONParse:e.JSON.parse,Map:e.Map,MapIteratorPrototype:E,MapPrototype:e.Map.prototype,Math:e.Math,Number:e.Number,NumberPrototype:e.Number.prototype,Object:e.Object,ObjectPrototype:e.Object.prototype,ObjProto_toString:e.Object.prototype.toString,ObjProto_valueOf:e.Object.prototype.valueOf,parseFloat:e.parseFloat,parseInt:e.parseInt,Promise:e.Promise,Promise_all:e.Promise.all,Promise_reject:e.Promise.reject,Promise_resolve:e.Promise.resolve,PromiseProto_then:e.Promise.prototype.then,PromisePrototype:e.Promise.prototype,Proxy:e.Proxy,RangeError:e.RangeError,RangeErrorPrototype:e.RangeError.prototype,ReferenceError:e.ReferenceError,ReferenceErrorPrototype:e.ReferenceError.prototype,Reflect:e.Reflect,RegExp:e.RegExp,RegExpPrototype:e.RegExp.prototype,Set:e.Set,SetIteratorPrototype:S,SetPrototype:e.Set.prototype,String:e.String,StringIteratorPrototype:h,StringPrototype:e.String.prototype,Symbol:e.Symbol,SymbolPrototype:e.Symbol.prototype,SyntaxError:e.SyntaxError,SyntaxErrorPrototype:e.SyntaxError.prototype,ThrowTypeError:g,TypedArray:I,TypedArrayPrototype:R,TypeError:e.TypeError,TypeErrorPrototype:e.TypeError.prototype,Uint8Array:e.Uint8Array,Uint8ArrayPrototype:e.Uint8Array.prototype,Uint8ClampedArray:e.Uint8ClampedArray,Uint8ClampedArrayPrototype:e.Uint8ClampedArray.prototype,Uint16Array:e.Uint16Array,Uint16ArrayPrototype:Uint16Array.prototype,Uint32Array:e.Uint32Array,Uint32ArrayPrototype:e.Uint32Array.prototype,URIError:e.URIError,URIErrorPrototype:e.URIError.prototype,WeakMap:e.WeakMap,WeakMapPrototype:e.WeakMap.prototype,WeakSet:e.WeakSet,WeakSetPrototype:e.WeakSet.prototype,escape:e.escape,unescape:e.unescape,Realm:Z}}function s(r){var e=v(r);return{Infinity:{value:1/0},NaN:{value:NaN},undefined:{value:void 0},eval:{value:e.eval},isFinite:{value:e.isFinite},isNaN:{value:e.isNaN},parseFloat:{value:e.parseFloat},parseInt:{value:e.parseInt},decodeURI:{value:e.decodeURI},decodeURIComponent:{value:e.decodeURIComponent},encodeURI:{value:e.encodeURI},encodeURIComponent:{value:e.encodeURIComponent},Array:{value:e.Array},ArrayBuffer:{value:e.ArrayBuffer},Boolean:{value:e.Boolean},DataView:{value:e.DataView},Date:{value:e.Date},Error:{value:e.Error},EvalError:{value:e.EvalError},Float32Array:{value:e.Float32Array},Float64Array:{value:e.Float64Array},Function:{value:e.Function},Int8Array:{value:e.Int8Array},Int16Array:{value:e.Int16Array},Int32Array:{value:e.Int32Array},Map:{value:e.Map},Number:{value:e.Number},Object:{value:e.Object},Promise:{value:e.Promise},Proxy:{value:e.Proxy},RangeError:{value:e.RangeError},ReferenceError:{value:e.ReferenceError},RegExp:{value:e.RegExp},Set:{value:e.Set},String:{value:e.String},Symbol:{value:e.Symbol},SyntaxError:{value:e.SyntaxError},TypeError:{value:e.TypeError},Uint8Array:{value:e.Uint8Array},Uint8ClampedArray:{value:e.Uint8ClampedArray},Uint16Array:{value:e.Uint16Array},Uint32Array:{value:e.Uint32Array},URIError:{value:e.URIError},WeakMap:{value:e.WeakMap},WeakSet:{value:e.WeakSet},Atomics:{value:e.Atomics},JSON:{value:e.JSON},Math:{value:e.Math},Reflect:{value:e.Reflect},escape:{value:e.escape},unescape:{value:e.unescape}}}function d(r){if(!r)throw new Error}function b(r){return"function"==typeof r}function m(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function A(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function E(r){var e=r[Y];return d("object"===(void 0===e?"undefined":G(e))),e}function P(){var r=window[H];return r||(window[H]={}),r}function S(r,e){return new function r(){A(this,r),this[K]=e}(r)}function w(r,e,t){if(void 0===e){var o=r[J];e=j(o.ObjectPrototype)}d("object"===(void 0===e?"undefined":G(e))),void 0===t&&(t=e),r[$]=e;var n=S(e,t);return r[q]=n,r}function h(r){var e=r[$],t=s(r[Y]);return F(e,t),e}function g(r){var e=v(r[Y]);return r[J]=e,e}function I(r){var e,t=(e={},m(e,J,{}),m(e,$,void 0),m(e,q,void 0),m(e,z,void 0),m(e,L,void 0),m(e,Q,void 0),m(e,X,void 0),m(e,Y,c()),e);return void 0===r?g(t):t[J]=r,t}function R(r,e){var t=r[z];return void 0===t?e:(d(!0===b(t)),t.call(void 0,e))}function O(r,e,t,o){return d(!1!==o||!1===t),!0===o&&(r=R(r,e)),"string"!=typeof r?r:i(r,E(e))}var U=Object.assign,j=Object.create,F=Object.defineProperties,T=Object.getOwnPropertyNames,k=Reflect.defineProperty,x=Reflect.deleteProperty,N=Reflect.getOwnPropertyDescriptor,_=Reflect.getPrototypeOf,W=Reflect.setPrototypeOf,D=!1,M={get:function(r,e){return"eval"===e&&D?(o(),r.confinedWindow.eval):r.globalObject[e]},set:function(r,e,t){return r.globalObject[e]=t,!0},defineProperty:function(r,e,t){return k(r.globalObject,e,t),!0},deleteProperty:function(r,e){return x(r.globalObject,e)},has:function(r,e){if("eval"===e&&D)return!0;if(e in r.globalObject)return!0;if(e in r.confinedWindow)throw new ReferenceError(e+" is not defined. If you are using typeof "+e+", you can change your program to use typeof global."+e+" instead");return!1},ownKeys:function(r){return T(r.globalObject)},getOwnPropertyDescriptor:function(r,e){return N(r.globalObject,e)},isExtensible:function(r){return!0},getPrototypeOf:function(r){return null},setPrototypeOf:function(r,e){return null===e}},C="$RealmEvaluatorIIFE$",B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},V=function(){function r(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}(),G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},H=Symbol("Realm Slot"),J=Symbol("Intrinsics Slot"),$=Symbol("GlobalObject Slot"),K=Symbol("GlobalThisValue Slot"),q=Symbol("GlobalEnv Slot"),z=Symbol("EvalHook Slot"),L=Symbol("IsDirectEvalHook Slot"),Q=Symbol("ImportHook Slot"),X=Symbol("ImportMetaHook Slot"),Y=Symbol("Sandbox"),Z=function(){function r(e){A(this,r);var t=this,o=P(),n=Object(e),a=n.importHook;if("inherit"===a)a=o[Q];else if(void 0!==a&&!1===b(a))throw new TypeError;var i=n.importMetaHook;if("inherit"===i)i=o[X];else if(void 0!==i&&!1===b(i))throw new TypeError;var y=n.evalHook;if("inherit"===y)y=o[z];else if(void 0!==y&&!1===b(y))throw new TypeError;var p=n.isDirectEvalHook;if("inherit"===p)p=o[L];else if(void 0!==p&&!1===b(p))throw new TypeError;var u=n.intrinsics;if("inherit"===u)u=o[J];else if(void 0!==u)throw new TypeError;var l=n.thisValue;if(void 0!==l&&"object"!==(void 0===l?"undefined":G(l)))throw new TypeError;var c=I(u);t[H]=c,w(c,void 0,l),void 0===a&&(a=function(){throw new TypeError}),c[Q]=a,void 0!==y&&(c[z]=y),void 0!==p&&(c[L]=p);var v=t.init;if(!b(v))throw new TypeError;v.call(t),f(c[Y],c[$],c[q][K])}return V(r,[{key:"init",value:function(){var r=this;if("object"!==(void 0===r?"undefined":G(r)))throw new TypeError;if(!(H in r))throw new TypeError;h(r[H])}},{key:"eval",value:function(r){var e=this;if("object"!==(void 0===e?"undefined":G(e)))throw new TypeError;if(!(H in e))throw new TypeError;return O(r,e[H],!1,!1)}},{key:"stdlib",get:function(){var r=this;if("object"!==(void 0===r?"undefined":G(r)))throw new TypeError;if(!(H in r))throw new TypeError;return s(E(r[H]))}},{key:"intrinsics",get:function(){var r=this;if("object"!==(void 0===r?"undefined":G(r)))throw new TypeError;if(!(H in r))throw new TypeError;return v(E(r[H]).confinedWindow)}},{key:"global",get:function(){var r=this;if("object"!==(void 0===r?"undefined":G(r)))throw new TypeError;if(!(H in r))throw new TypeError;return r[H][$]}},{key:"thisValue",get:function(){var r=this;if("object"!==(void 0===r?"undefined":G(r)))throw new TypeError;if(!(H in r))throw new TypeError;return r[H][q][K]}}]),r}();return Z.toString=function(){return"function Realm() { [shim code] }"},Z});
//# sourceMappingURL=realm-shim.min.js.map
