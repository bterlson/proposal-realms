!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):r.RealmShim=e()}(this,function(){"use strict";function r(){var r=document.createElement("iframe");return r.style.display="none",r.title="script",r.setAttribute("aria-hidden",!0),document.body.appendChild(r),r}function e(e,t){var o=r(),n=o.contentDocument,a=o.contentWindow,i=e||a.Object.create(null);return{iframe:o,iframeDocument:n,confinedWindow:a,thisValue:t||i,globalObject:i,globalProxy:void 0}}function t(r){var e=r.confinedWindow.Object;try{if(void 0===e)return;e.defineProperty(e.prototype,"__defineGetter__",{value:function(r,t){return e.defineProperty(this,r,{get:t})}}),e.defineProperty(e.prototype,"__defineSetter__",{value:function(r,t){return e.defineProperty(this,r,{set:t})}}),e.defineProperty(e.prototype,"__lookupGetter__",{value:function(r){for(var t,o=this;o&&void 0===(t=e.getOwnPropertyDescriptor(o,r));)o=e.getPrototypeOf(this);return t?t.get:void 0}}),e.defineProperty(e.prototype,"__lookupSetter__",{value:function(r){for(var t,o=this;o&&void 0===(t=e.getOwnPropertyDescriptor(o,r));)o=e.getPrototypeOf(this);return t?t.set:void 0}}),e.seal(e.prototype)}catch(r){}}function o(){s=!0}function n(){s=!1}function a(r){return r=r.replace(/\`/g,"\\`"),"\n        function "+P+'() {\n            with(arguments[0]) {\n                return (function(){\n                    "use strict";\n                    return eval(`'+r+"`);\n                }).call(this);\n            }\n        }\n    "}function i(r,e){var t=e.iframeDocument,o=e.confinedWindow,n=t.body,a=t.createElement("script");a.type="text/javascript",o[P]=void 0,a.appendChild(t.createTextNode(r)),n.appendChild(a),n.removeChild(a);var i=o[P];return o[P]=void 0,i}function y(r,e){if(r){r=a(r+""),o();var t=i(r,e),y=t.apply(e.thisValue,[e.globalProxy]);return n(),y}}function p(r){var e={eval:function(e){return y(e,r)}};return Object.setPrototypeOf(e.eval,r.Function),e.eval.toString=function(){return"function eval() { [shim code] }"},e.eval}function u(r){var e=r.confinedWindow,t=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var n=t.pop();return y("(function anonymous("+t.join(", ")+"){\n"+n+"\n}).bind(this)",r)};return t.prototype=e.Function.prototype,Object.setPrototypeOf(t,t.prototype),t.prototype.constructor=t,t.toString=function(){return"function Function() { [shim code] }"},t}function l(r){r.Function=u(r),r.eval=p(r)}function c(r){var e=r.confinedWindow,t=r.globalObject,o=getProto(e.Array(0)[m]()),n=getProto(e.String()[m]()),a=getProto(o),i=e.eval('(function*(){"use strict";yield arguments;})'),y=getProto(i),p=getProto(y),u=p.constructor;return{Array:e.Array,ArrayBuffer:e.ArrayBuffer,ArrayBufferPrototype:e.ArrayBuffer.prototype,ArrayIteratorPrototype:o,ArrayPrototype:e.Array.prototype,ArrayProto_values:e.Array.prototype.values,Boolean:e.Boolean,BooleanPrototype:e.Boolean.prototype,DataView:e.DataView,DataViewPrototype:e.DataView.prototype,Date:e.Date,DatePrototype:e.Date.prototype,decodeURI:e.decodeURI,decodeURIComponent:e.decodeURIComponent,encodeURI:e.encodeURI,encodeURIComponent:e.encodeURIComponent,Error:e.Error,ErrorPrototype:e.Error.prototype,eval:r.eval,EvalError:e.EvalError,EvalErrorPrototype:e.EvalError.prototype,Float32Array:e.Float32Array,Float32ArrayPrototype:e.Float32Array.prototype,Float64Array:e.Float64Array,Float64ArrayPrototype:e.Float64Array.prototype,Function:r.Function,FunctionPrototype:e.Function.prototype,Generator:y,GeneratorFunction:u,GeneratorPrototype:p,Int8Array:e.Int8Array,Int8ArrayPrototype:e.Int8Array.prototype,Int16Array:e.Int16Array,Int16ArrayPrototype:e.Int16Array.prototype,Int32Array:e.Int32Array,Int32ArrayPrototype:e.Int32Array.prototype,isFinite:e.isFinite,isNaN:e.isNaN,IteratorPrototype:a,JSON:e.JSON,Map:e.Map,MapIteratorPrototype:void 0,MapPrototype:e.Map.prototype,Math:e.Math,Number:e.Number,NumberPrototype:e.Number.prototype,Object:e.Object,ObjectPrototype:e.Object.prototype,ObjProto_toString:e.Object.prototype.toString,ObjProto_valueOf:e.Object.prototype.valueOf,parseFloat:e.parseFloat,parseInt:e.parseInt,Promise:e.Promise,PromisePrototype:e.Promise.prototype,Proxy:e.Proxy,RangeError:e.RangeError,RangeErrorPrototype:e.RangeError.prototype,ReferenceError:e.ReferenceError,ReferenceErrorPrototype:e.ReferenceError.prototype,Reflect:e.Reflect,RegExp:e.RegExp,RegExpPrototype:e.RegExp.prototype,Set:e.Set,SetIteratorPrototype:void 0,SetPrototype:e.Set.prototype,String:e.String,StringIteratorPrototype:n,StringPrototype:e.String.prototype,Symbol:e.Symbol,SymbolPrototype:e.Symbol.prototype,SyntaxError:e.SyntaxError,SyntaxErrorPrototype:e.SyntaxError.prototype,ThrowTypeError:void 0,TypedArray:void 0,TypedArrayPrototype:void 0,TypeError:e.TypeError,TypeErrorPrototype:e.TypeError.prototype,Uint8Array:e.Uint8Array,Uint8ArrayPrototype:e.Uint8Array.prototype,Uint8ClampedArray:e.Uint8ClampedArray,Uint8ClampedArrayPrototype:e.Uint8ClampedArray.prototype,Uint16Array:e.Uint16Array,Uint16ArrayPrototype:Uint16Array.prototype,Uint32Array:e.Uint32Array,Uint32ArrayPrototype:e.Uint32Array.prototype,URIError:e.URIError,URIErrorPrototype:e.URIError.prototype,WeakMap:e.WeakMap,WeakMapPrototype:e.WeakMap.prototype,WeakSet:e.WeakSet,WeakSetPrototype:e.WeakSet.prototype,global:t,Realm:I}}function f(r){var e=c(r);return{Array:{value:e.Array},ArrayBuffer:{value:e.ArrayBuffer},Boolean:{value:e.Boolean},DataView:{value:e.DataView},Date:{value:e.Date},decodeURI:{value:e.decodeURI},decodeURIComponent:{value:e.decodeURIComponent},encodeURI:{value:e.encodeURI},encodeURIComponent:{value:e.encodeURIComponent},Error:{value:e.Error},eval:{value:e.eval},EvalError:{value:e.EvalError},Float32Array:{value:e.Float32Array},Float64Array:{value:e.Float64Array},Function:{value:e.Function},Int8Array:{value:e.Int8Array},Int16Array:{value:e.Int16Array},Int32Array:{value:e.Int32Array},isFinite:{value:e.isFinite},isNaN:{value:e.isNaN},JSON:{value:e.JSON},Map:{value:e.Map},Math:{value:e.Math},Number:{value:e.Number},Object:{value:e.Object},parseFloat:{value:e.parseFloat},parseInt:{value:e.parseInt},Promise:{value:e.Promise},Proxy:{value:e.Proxy},RangeError:{value:e.RangeError},ReferenceError:{value:e.ReferenceError},Reflect:{value:e.Reflect},RegExp:{value:e.RegExp},Set:{value:e.Set},String:{value:e.String},Symbol:{value:e.Symbol},SyntaxError:{value:e.SyntaxError},TypeError:{value:e.TypeError},Uint8Array:{value:e.Uint8Array},Uint8ClampedArray:{value:e.Uint8ClampedArray},Uint16Array:{value:e.Uint16Array},Uint32Array:{value:e.Uint32Array},URIError:{value:e.URIError},WeakMap:{value:e.WeakMap},WeakSet:{value:e.WeakSet},global:{value:e.global},Realm:{value:e.Realm}}}function v(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function d(r){var e=E.get(r);if(!e)throw new Error("Invalid realm object.");return e}var s=!1,b={get:function(r,e){return"eval"===e&&s?(n(),r.confinedWindow.eval):r.globalObject[e]},set:function(r,e,t){return r.globalObject[e]=t,!0},defineProperty:function(r,e,t){return Object.defineProperty(r.globalObject,e,t),!0},deleteProperty:function(r,e){return Reflect.deleteProperty(r.globalObject,e)},has:function(r,e){if("eval"===e&&s)return!0;if(e in r.globalObject)return!0;if(e in r.confinedWindow)throw new ReferenceError(e+" is not defined. If you are using typeof "+e+", you can change your program to use typeof global."+e+" instead");return!1},ownKeys:function(r){return Object.getOwnPropertyNames(r.globalObject)},getOwnPropertyDescriptor:function(r,e){return Object.getOwnPropertyDescriptor(r.globalObject,e)},isExtensible:function(r){return!0},getPrototypeOf:function(r){return null},setPrototypeOf:function(r,e){return null===e}},P="$RealmEvaluatorIIFE$",g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},m=("undefined"==typeof Symbol?"undefined":g(Symbol))&&Symbol.iterator||"@@iterator",A=function(){function r(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}(),E=new WeakMap,I=function(){function r(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,r);var n=o.thisValue,a=o.globalObj,i=e(a,n);t(i),Object.assign(i,l(i)),E.set(this,i),i.globalProxy=new Proxy(i,b),this.init()}return A(r,[{key:"init",value:function(){Object.defineProperties(this.global,this.stdlib)}},{key:"eval",value:function(r){return y(r,d(this))}},{key:"stdlib",get:function(){return f(d(this))}},{key:"intrinsics",get:function(){return c(d(this))}},{key:"global",get:function(){return d(this).globalObject}},{key:"thisValue",get:function(){return d(this).thisValue}}]),r}();return I.toString=function(){return"function Realm() { [shim code] }"},I});
//# sourceMappingURL=realm-shim.min.js.map
